.row

  .threecol
    %h1 Registration
    %p Remember, Ruby Weekend is geared for those with little or no programing experience; however anyone is welcome to attend.

    %h1 Only $100
    %h3 That's right, just $100 for a two day workshop.

    %p (This is volunteer effort by The Las Vegas Ruby Group.)
    =link_to('View Refund Policy', refund_policy_path)


  .sevencol.last
    - if @registration.errors.any?
      #error_explanation
        %h2 There was a problem with your registration:
        %ul
          - @registration.errors.full_messages.each do |msg|
            %li= msg

    = form_for(@registration, html: { id: "payment-form" }) do |f|
      .section-wrapper
        %ol
          %li= label_tag("Full Name")
          %li= f.text_field(:name)

          %li= label_tag("Email")
          %li= f.text_field(:email)

  

          %script{:src => "https://checkout.stripe.com/v2/checkout.js"}
          %button#customButton Purchase
          :javascript
            $('#customButton').click(function(){
              var token = function(res){
                var $input = $('<input type=hidden name=stripeToken />').val(res.id);
                $('form').append($input).submit();
              };

              StripeCheckout.open({
                key:         "#{Rails.configuration.stripe[:publishable_key]}",
                address:     true,
                amount:      10000,
                name:        $("#registration_name").val(),
                email:       $("#registration_email").val(),
                description: 'Ruby Weekend',
                panelLabel:  'Checkout',
                token:       token
              });

              return false;
            });

        %ol
          / %li
          / = label_tag(:agreed_to_refund_policy, "I agree to the
          /   = link_to Ruby Weekend refund policy, refund_policy_path}")
          / = f.check_box(:agreed_to_refund_policy)

          / %li
          / = f.check_box(:agreed_to_min_requirements)
          / = label_tag(:agreed_to_min_requirements, 'My laptop meets the minimum requirements')

          / .section-wrapper.controls
          /   %ol
          /     %li= submit_tag("Submit Registration")
          /       %script{"data-amount" => "10000", "data-description" => "Ruby Weekend Registration", "data-key" => Rails.configuration.stripe[:publishable_key], :src => "https://checkout.stripe.com/v2/checkout.js"}
.row
  .sevencol.last

    %h2 Quotes from previous Ruby Weekends

    %p "The value of your 2 day conference far exceeds the [cost]. I've paid $1,000+ for conferences where I learned less!‚Äù

    %p "Everything I expected and more. You guys are great fun and super presenters!"

    %p "You had great presenters. Jeremy was especially exceptional."


